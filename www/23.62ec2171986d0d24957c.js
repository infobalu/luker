(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{mhqm:function(n,l,o){"use strict";o.r(l);var t=o("CcnG"),e=o("mrSG"),u=o("ZZ/e"),i=o("H+bZ"),a=o("wd/R"),c=o("gTw3"),s=o("23JA"),r=function(){function n(n,l,o,t,e,u,i){this.menu=n,this.apiService=l,this.router=o,this.alertController=t,this.geolocation=e,this.nativeGeocoder=u,this.toastController=i,this.activeCheckins=[],this.n1=1,this.checkins=0}return n.prototype.ionViewWillEnter=function(){this.menu.enable(!0),this.getActiveCheckins()},n.prototype.ngOnInit=function(){this.userDetails=JSON.parse(localStorage.getItem("userDetails")),this.attendance=JSON.parse(localStorage.getItem("attendance")),this.day_plan_status=this.userDetails.day_plan_status,console.log("=this.userDetails= : "+JSON.stringify(this.userDetails)),console.log("=this.attendance= : "+JSON.stringify(this.attendance)),this.checkins=this.userDetails.checkins,this.att_id=this.userDetails.att_id,"1"==this.day_plan_status?(this.isToggled=!0,this.n1=1):(this.isToggled=!1,this.n1=1)},n.prototype.getActiveCheckins=function(){var n=this;this.apiService.getData("/getActiveCheckins/"+this.userDetails._id).subscribe(function(l){n.activeCheckins=l.data})},n.prototype.goToAddEmployee=function(){this.router.navigateByUrl("/add-employee")},n.prototype.goToCheckIn=function(){this.router.navigateByUrl("/clenttype")},n.prototype.radioChecked=function(n){console.log("radioGroupChange : ",n)},n.prototype.triggerStop=function(){console.log("triggerStop : "),this.getGeoLocation()},n.prototype.getGeoLocation=function(){var n=this;this.geolocation.getCurrentPosition({enableHighAccuracy:!0}).then(function(l){n.whereInTheEarth(l.coords.latitude,l.coords.longitude),n.latitude=l.coords.latitude,n.longitude=l.coords.longitude}).catch(function(n){console.log("Error getting location",n)})},n.prototype.whereInTheEarth=function(n,l){var o=this;this.nativeGeocoder.reverseGeocode(n,l,{useLocale:!0,maxResults:5}).then(function(n){if(n[0]){o.locationName="",n[0].subThoroughfare&&(o.locationName=o.locationName+n[0].subThoroughfare+","),n[0].thoroughfare&&(o.locationName=o.locationName+n[0].thoroughfare+","),n[0].subLocality&&(o.locationName=o.locationName+n[0].subLocality+","),n[0].locality&&(o.locationName=o.locationName+n[0].locality+","),n[0].subAdministrativeArea&&(o.locationName=o.locationName+n[0].subAdministrativeArea+","),n[0].administrativeArea&&(o.locationName=o.locationName+n[0].administrativeArea+","),n[0].postalCode&&(o.locationName=o.locationName+n[0].postalCode+","),n[0].countryName&&(o.locationName=o.locationName+n[0].countryName+","),console.log("= this.locationName final= : "+o.locationName);var l=a().format("DD-MM-YYYY, hh:mm:ss a");console.log("==this.userDetails ID === : "+o.userDetails.user._id),o.isToggled?(console.log("mark atten"),o.markAttendance()):(o.params={end_time:l,end_location:o.locationName,att_id:o.att_id,user_id:o.userDetails.user._id},o.apiService.postData("/endAttendance",o.params).subscribe(function(n){console.log("=result= :"+JSON.stringify(n)),"1"==n.success?(o.presentToast(n.message,"middle"),o.isToggled=!1,o.n1=0):(o.presentToast("Something went wrong, Please try again..","middle"),o.isToggled=!0,o.n1=0)},function(n){alert(JSON.stringify(n)),o.isToggled=!0,o.n1=0}))}else o.locationName="Unable to fetch geolocation",o.presentToast("Please check the location settings","bottom")}).catch(function(n){o.locationName="Unable to fetch geolocation",o.isToggled=!0,o.n1=0,o.presentToast("Please check the location settings Or :"+n,"bottom")})},n.prototype.markAttendance=function(){this.presentAlertPrompt()},n.prototype.presentAlertPrompt=function(){return e.b(this,void 0,void 0,function(){var n=this;return e.e(this,function(l){switch(l.label){case 0:return[4,this.alertController.create({inputs:[{name:"dayplan",type:"text",placeholder:"Day Plan"}],buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:function(){console.log("Confirm Cancel : "+n.isToggled),n.isToggled=!1,n.n1=0}},{text:"Ok",handler:function(l){if(""==l.dayplan)n.presentToast("dayplan is required","bottom"),n.isToggled=!1,n.n1=0;else{console.log(l.dayplan),n.dayplan=l.dayplan;var o=a().format("DD-MM-YYYY, hh:mm:ss a"),t={user:n.userDetails._id,status:"present",start_time:o,start_location:n.locationName,day_plan:n.dayplan};console.log("=params== : "+t),n.apiService.postData("/attendance",t).subscribe(function(l){localStorage.setItem("attendance",JSON.stringify(l.data)),console.log("=attendance result NEW= :"+JSON.stringify(localStorage.getItem("attendance"))),n.presentToast(l.message,"1"==l.success?"bottom":"middle")},function(l){console.log("=ERRRRRRRRR== : "+l),n.isToggled=!0,n.n1=0})}}}]})];case 1:return[4,l.sent().present()];case 2:return l.sent(),[2]}})})},n.prototype.presentToast=function(n,l){return e.b(this,void 0,void 0,function(){return e.e(this,function(o){switch(o.label){case 0:return[4,this.toastController.create({message:n,position:l,duration:2e3})];case 1:return o.sent().present(),[2]}})})},n.prototype.notify=function(n){console.log("==notify called= : "+n),this.isToggled&&1==this.n1?(console.log("Toggled: "+this.isToggled),this.getGeoLocation()):1==this.n1&&(console.log("Toggled: "+this.isToggled),this.getGeoLocation()),this.n1=1},n.prototype.goToMyCheckin=function(){console.log("==goToMyCheckin  mycheckins="),this.router.navigateByUrl("/mycheckins")},n}(),b=function(){return function(){}}(),h=o("pMnS"),g=o("oBZk"),d=o("Ip0R"),p=o("gIcY"),m=o("ZYCi"),f=t.nb({encapsulation:0,styles:[[".dashboard[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{padding-left:25px;padding-right:25px;margin-top:25px}.dashboard[_ngcontent-%COMP%]   .active-check-ins[_ngcontent-%COMP%]{margin:45px 15px 15px}.dashboard[_ngcontent-%COMP%]   .active-check-ins[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{border:1px solid #000}.dashboard[_ngcontent-%COMP%]   .active-check-ins[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{max-width:33%;min-width:33%}.dashboard[_ngcontent-%COMP%]   .active-check-ins[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{text-align:center;font-size:20px}.dashboard[_ngcontent-%COMP%]   .active-check-ins[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{max-width:100%}.dashboard[_ngcontent-%COMP%]   .active-check-ins[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{height:25px;margin-top:0;padding:0;width:96px;font-size:12px}"]],data:{}});function k(n){return t.Eb(0,[(n()(),t.pb(0,0,null,null,2,"ion-button",[["color","secondary"],["expand","block"],["style","width: 100%"]],null,[[null,"click"]],function(n,l,o){var t=!0;return"click"===l&&(t=!1!==n.component.goToCheckIn()&&t),t},g.K,g.c)),t.ob(1,49152,null,0,u.j,[t.h,t.k],{color:[0,"color"],expand:[1,"expand"]},null),(n()(),t.Db(-1,0,[" Create Check-In"]))],function(n,l){n(l,1,0,"secondary","block")},null)}function y(n){return t.Eb(0,[(n()(),t.pb(0,0,null,null,2,"ion-button",[["color","secondary"],["expand","block"],["style","width: 100%"]],null,[[null,"click"]],function(n,l,o){var t=!0;return"click"===l&&(t=!1!==n.component.goToMyCheckin()&&t),t},g.K,g.c)),t.ob(1,49152,null,0,u.j,[t.h,t.k],{color:[0,"color"],expand:[1,"expand"]},null),(n()(),t.Db(-1,0,[" My Check-In"]))],function(n,l){n(l,1,0,"secondary","block")},null)}function C(n){return t.Eb(0,[(n()(),t.pb(0,0,null,null,2,"ion-col",[],null,null,null,g.R,g.j)),t.ob(1,49152,null,0,u.s,[t.h,t.k],null,null),(n()(),t.Db(2,0,["",""]))],null,function(n,l){n(l,2,0,l.parent.context.$implicit.distributor_name)})}function _(n){return t.Eb(0,[(n()(),t.pb(0,0,null,null,2,"ion-col",[],null,null,null,g.R,g.j)),t.ob(1,49152,null,0,u.s,[t.h,t.k],null,null),(n()(),t.Db(2,0,["",""]))],null,function(n,l){n(l,2,0,l.parent.context.$implicit.dealer_name)})}function v(n){return t.Eb(0,[(n()(),t.pb(0,0,null,null,2,"ion-col",[],null,null,null,g.R,g.j)),t.ob(1,49152,null,0,u.s,[t.h,t.k],null,null),(n()(),t.Db(-1,0,["Distributor"]))],null,null)}function w(n){return t.Eb(0,[(n()(),t.pb(0,0,null,null,2,"ion-col",[],null,null,null,g.R,g.j)),t.ob(1,49152,null,0,u.s,[t.h,t.k],null,null),(n()(),t.Db(-1,0,["Dealer"]))],null,null)}function D(n){return t.Eb(0,[(n()(),t.pb(0,0,null,null,14,"ion-row",[],null,null,null,g.ib,g.A)),t.ob(1,49152,null,0,u.hb,[t.h,t.k],null,null),(n()(),t.gb(16777216,null,0,1,null,C)),t.ob(3,16384,null,0,d.j,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(n()(),t.gb(16777216,null,0,1,null,_)),t.ob(5,16384,null,0,d.j,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(n()(),t.gb(16777216,null,0,1,null,v)),t.ob(7,16384,null,0,d.j,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(n()(),t.gb(16777216,null,0,1,null,w)),t.ob(9,16384,null,0,d.j,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(n()(),t.pb(10,0,null,0,4,"ion-col",[],null,null,null,g.R,g.j)),t.ob(11,49152,null,0,u.s,[t.h,t.k],null,null),(n()(),t.pb(12,0,null,0,2,"ion-button",[["color","warning"]],null,null,null,g.K,g.c)),t.ob(13,49152,null,0,u.j,[t.h,t.k],{color:[0,"color"]},null),(n()(),t.Db(-1,0,["Check Out"]))],function(n,l){n(l,3,0,"distributor"==l.context.$implicit.check_in_for),n(l,5,0,"dealer"==l.context.$implicit.check_in_for),n(l,7,0,"distributor"==l.context.$implicit.check_in_for),n(l,9,0,"dealer"==l.context.$implicit.check_in_for),n(l,13,0,"warning")},null)}function O(n){return t.Eb(0,[(n()(),t.pb(0,0,null,null,19,"ion-grid",[["class","active-check-ins"]],null,null,null,g.U,g.m)),t.ob(1,49152,null,0,u.z,[t.h,t.k],null,null),(n()(),t.pb(2,0,null,0,4,"ion-row",[["class","head"]],null,null,null,g.ib,g.A)),t.ob(3,49152,null,0,u.hb,[t.h,t.k],null,null),(n()(),t.pb(4,0,null,0,2,"ion-col",[],null,null,null,g.R,g.j)),t.ob(5,49152,null,0,u.s,[t.h,t.k],null,null),(n()(),t.Db(-1,0,[" Active Check-In "])),(n()(),t.pb(7,0,null,0,10,"ion-row",[],null,null,null,g.ib,g.A)),t.ob(8,49152,null,0,u.hb,[t.h,t.k],null,null),(n()(),t.pb(9,0,null,0,2,"ion-col",[],null,null,null,g.R,g.j)),t.ob(10,49152,null,0,u.s,[t.h,t.k],null,null),(n()(),t.Db(-1,0,["Name"])),(n()(),t.pb(12,0,null,0,2,"ion-col",[],null,null,null,g.R,g.j)),t.ob(13,49152,null,0,u.s,[t.h,t.k],null,null),(n()(),t.Db(-1,0,["Type"])),(n()(),t.pb(15,0,null,0,2,"ion-col",[],null,null,null,g.R,g.j)),t.ob(16,49152,null,0,u.s,[t.h,t.k],null,null),(n()(),t.Db(-1,0,["Action"])),(n()(),t.gb(16777216,null,0,1,null,D)),t.ob(19,278528,null,0,d.i,[t.O,t.L,t.s],{ngForOf:[0,"ngForOf"]},null)],function(n,l){n(l,19,0,l.component.activeCheckins)},null)}function T(n){return t.Eb(0,[(n()(),t.pb(0,0,null,null,10,"ion-header",[],null,null,null,g.V,g.n)),t.ob(1,49152,null,0,u.A,[t.h,t.k],null,null),(n()(),t.pb(2,0,null,0,8,"ion-toolbar",[["color","primary"]],null,null,null,g.pb,g.H)),t.ob(3,49152,null,0,u.Ab,[t.h,t.k],{color:[0,"color"]},null),(n()(),t.pb(4,0,null,0,3,"ion-buttons",[["slot","start"]],null,null,null,g.L,g.d)),t.ob(5,49152,null,0,u.k,[t.h,t.k],null,null),(n()(),t.pb(6,0,null,0,1,"ion-menu-button",[["autoHide","false"]],null,null,null,g.db,g.w)),t.ob(7,49152,null,0,u.Q,[t.h,t.k],{autoHide:[0,"autoHide"]},null),(n()(),t.pb(8,0,null,0,2,"ion-title",[],null,null,null,g.nb,g.F)),t.ob(9,49152,null,0,u.yb,[t.h,t.k],null,null),(n()(),t.Db(-1,0,["Dashboard"])),(n()(),t.pb(11,0,null,null,32,"ion-content",[["class","dashboard"]],null,null,null,g.S,g.k)),t.ob(12,49152,null,0,u.t,[t.h,t.k],null,null),(n()(),t.pb(13,0,null,0,28,"ion-card",[],null,null,null,g.Q,g.e)),t.ob(14,49152,null,0,u.l,[t.h,t.k],null,null),(n()(),t.pb(15,0,null,0,26,"ion-grid",[],null,null,null,g.U,g.m)),t.ob(16,49152,null,0,u.z,[t.h,t.k],null,null),(n()(),t.pb(17,0,null,0,16,"ion-row",[["style","border: bottom 1px solid #cccccc;"]],null,null,null,g.ib,g.A)),t.ob(18,49152,null,0,u.hb,[t.h,t.k],null,null),(n()(),t.pb(19,0,null,0,5,"ion-col",[["col-6",""]],null,null,null,g.R,g.j)),t.ob(20,49152,null,0,u.s,[t.h,t.k],null,null),(n()(),t.pb(21,0,null,0,3,"p",[],null,null,null,null,null)),(n()(),t.Db(-1,null,["Checkins Left"])),(n()(),t.pb(23,0,null,null,1,"span",[["class","count"]],null,null,null,null,null)),(n()(),t.Db(24,null,[" "," "])),(n()(),t.pb(25,0,null,0,8,"ion-col",[["col-6",""],["text-right",""]],null,null,null,g.R,g.j)),t.ob(26,49152,null,0,u.s,[t.h,t.k],null,null),(n()(),t.pb(27,0,null,0,6,"ion-toggle",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionChange"],[null,"ionBlur"]],function(n,l,o){var e=!0,u=n.component;return"ionBlur"===l&&(e=!1!==t.yb(n,28)._handleBlurEvent()&&e),"ionChange"===l&&(e=!1!==t.yb(n,28)._handleIonChange(o.target.checked)&&e),"ngModelChange"===l&&(e=!1!==(u.isToggled=o)&&e),"ionChange"===l&&(e=!1!==u.notify(u.n1)&&e),e},g.ob,g.G)),t.ob(28,16384,null,0,u.c,[t.k],null,null),t.Ab(1024,null,p.h,function(n){return[n]},[u.c]),t.ob(30,671744,null,0,p.m,[[8,null],[8,null],[8,null],[6,p.h]],{model:[0,"model"]},{update:"ngModelChange"}),t.Ab(2048,null,p.i,null,[p.m]),t.ob(32,16384,null,0,p.j,[[4,p.i]],null,null),t.ob(33,49152,null,0,u.zb,[t.h,t.k],null,null),(n()(),t.pb(34,0,null,0,3,"ion-row",[],null,null,null,g.ib,g.A)),t.ob(35,49152,null,0,u.hb,[t.h,t.k],null,null),(n()(),t.gb(16777216,null,0,1,null,k)),t.ob(37,16384,null,0,d.j,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(n()(),t.pb(38,0,null,0,3,"ion-row",[],null,null,null,g.ib,g.A)),t.ob(39,49152,null,0,u.hb,[t.h,t.k],null,null),(n()(),t.gb(16777216,null,0,1,null,y)),t.ob(41,16384,null,0,d.j,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(n()(),t.gb(16777216,null,0,1,null,O)),t.ob(43,16384,null,0,d.j,[t.O,t.L],{ngIf:[0,"ngIf"]},null)],function(n,l){var o=l.component;n(l,3,0,"primary"),n(l,7,0,"false"),n(l,30,0,o.isToggled),n(l,37,0,"employee"==o.userDetails.user_type),n(l,41,0,"employee"==o.userDetails.user_type),n(l,43,0,o.activeCheckins.length)},function(n,l){n(l,24,0,l.component.checkins),n(l,27,0,t.yb(l,32).ngClassUntouched,t.yb(l,32).ngClassTouched,t.yb(l,32).ngClassPristine,t.yb(l,32).ngClassDirty,t.yb(l,32).ngClassValid,t.yb(l,32).ngClassInvalid,t.yb(l,32).ngClassPending)})}function N(n){return t.Eb(0,[(n()(),t.pb(0,0,null,null,1,"app-dashboard",[],null,null,null,T,f)),t.ob(1,114688,null,0,r,[u.Eb,i.a,m.m,u.a,c.a,s.a,u.Nb],null,null)],function(n,l){n(l,1,0)},null)}var x=t.lb("app-dashboard",r,N,{},{},[]);o.d(l,"DashboardPageModuleNgFactory",function(){return I});var I=t.mb(b,[],function(n){return t.vb([t.wb(512,t.j,t.bb,[[8,[h.a,x]],[3,t.j],t.x]),t.wb(4608,d.l,d.k,[t.u,[2,d.r]]),t.wb(4608,p.r,p.r,[]),t.wb(4608,u.b,u.b,[t.z,t.g]),t.wb(4608,u.Fb,u.Fb,[u.b,t.j,t.q,d.c]),t.wb(4608,u.Ib,u.Ib,[u.b,t.j,t.q,d.c]),t.wb(1073742336,d.b,d.b,[]),t.wb(1073742336,p.p,p.p,[]),t.wb(1073742336,p.g,p.g,[]),t.wb(1073742336,u.Cb,u.Cb,[]),t.wb(1073742336,m.p,m.p,[[2,m.v],[2,m.m]]),t.wb(1073742336,b,b,[]),t.wb(1024,m.k,function(){return[[{path:"",component:r}]]},[])])})}}]);