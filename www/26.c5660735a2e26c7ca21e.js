(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{"Qq/Q":function(n,l,t){"use strict";t.r(l);var e=t("CcnG"),o=t("mrSG"),u=t("H+bZ"),a=t("ZZ/e"),i=t("wd/R"),s=t("gTw3"),r=t("23JA"),c=function(){function n(n,l,t,e,o){this.apiService=n,this.toastController=l,this.router=t,this.geolocation=e,this.nativeGeocoder=o}return n.prototype.ngOnInit=function(){this.userDetails=JSON.parse(localStorage.getItem("userDetails")),console.log("usr data : "+JSON.stringify(this.userDetails))},n.prototype.ionViewWillEnter=function(){this.getGeoLocation()},n.prototype.markAttendance=function(){var n=this;console.log("=this._id== : "+this.userDetails._id);var l=i().format("DD-MM-YYYY, hh:mm:ss a"),t={user:this.userDetails._id,status:this.status,start_time:l,start_location:this.locationName,day_plan:this.dayplan};console.log("=params== : "+t),this.apiService.postData("/attendance",t).subscribe(function(l){console.log("=attendance result= :"+JSON.stringify(l)),localStorage.setItem("attendance",JSON.stringify(l.data)),"1"==l.success?(n.presentToast(l.message,"bottom"),n.router.navigateByUrl("/dashboard")):n.presentToast(l.message,"middle")},function(n){console.log("=ERRRRRRRRR== : "+n),alert(JSON.stringify(n))})},n.prototype.triggerStart=function(){this.status="present",this.presentToast("started","bottom")},n.prototype.presentToast=function(n,l){return o.b(this,void 0,void 0,function(){return o.e(this,function(t){switch(t.label){case 0:return[4,this.toastController.create({message:n,position:l,duration:2e3})];case 1:return t.sent().present(),[2]}})})},n.prototype.getGeoLocation=function(){var n=this;this.geolocation.getCurrentPosition({enableHighAccuracy:!0}).then(function(l){n.whereInTheEarth(l.coords.latitude,l.coords.longitude),n.latitude=l.coords.latitude,n.longitude=l.coords.longitude}).catch(function(n){console.log("Error getting location",n)}),this.geolocation.watchPosition().subscribe(function(l){n.whereInTheEarth(l.coords.latitude,l.coords.longitude),n.latitude=l.coords.latitude,n.longitude=l.coords.longitude})},n.prototype.whereInTheEarth=function(n,l){var t=this;this.nativeGeocoder.reverseGeocode(n,l,{useLocale:!0,maxResults:5}).then(function(n){n[0]?(t.locationName="",n[0].subThoroughfare&&(t.locationName=t.locationName+n[0].subThoroughfare+","),n[0].thoroughfare&&(t.locationName=t.locationName+n[0].thoroughfare+","),n[0].subLocality&&(t.locationName=t.locationName+n[0].subLocality+","),n[0].locality&&(t.locationName=t.locationName+n[0].locality+","),n[0].subAdministrativeArea&&(t.locationName=t.locationName+n[0].subAdministrativeArea+","),n[0].administrativeArea&&(t.locationName=t.locationName+n[0].administrativeArea+","),n[0].postalCode&&(t.locationName=t.locationName+n[0].postalCode+","),n[0].countryName&&(t.locationName=t.locationName+n[0].countryName+",")):t.locationName="Unable to fetch geolocation"}).catch(function(n){t.locationName="Unable to fetch geolocation"})},n}(),b=function(){return function(){}}(),d=t("pMnS"),g=t("oBZk"),p=t("gIcY"),h=t("ZYCi"),m=e.nb({encapsulation:0,styles:[[""]],data:{}});function y(n){return e.Eb(0,[(n()(),e.pb(0,0,null,null,32,"ion-content",[["padding",""]],null,null,null,g.S,g.k)),e.ob(1,49152,null,0,a.t,[e.h,e.k],null,null),(n()(),e.pb(2,0,null,0,30,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(n,l,t){var o=!0;return"submit"===l&&(o=!1!==e.yb(n,4).onSubmit(t)&&o),"reset"===l&&(o=!1!==e.yb(n,4).onReset()&&o),o},null,null)),e.ob(3,16384,null,0,p.q,[],null,null),e.ob(4,4210688,null,0,p.l,[[8,null],[8,null]],null,null),e.Ab(2048,null,p.a,null,[p.l]),e.ob(6,16384,null,0,p.k,[[4,p.a]],null,null),(n()(),e.pb(7,0,null,null,25,"ion-grid",[],null,null,null,g.U,g.m)),e.ob(8,49152,null,0,a.z,[e.h,e.k],null,null),(n()(),e.pb(9,0,null,0,23,"ion-row",[["justify-content-center",""]],null,null,null,g.ib,g.A)),e.ob(10,49152,null,0,a.hb,[e.h,e.k],null,null),(n()(),e.pb(11,0,null,0,21,"ion-col",[["align-self-center",""],["size-lg","5"],["size-md","6"],["size-xs","12"]],null,null,null,g.R,g.j)),e.ob(12,49152,null,0,a.s,[e.h,e.k],null,null),(n()(),e.pb(13,0,null,0,2,"div",[["text-center",""]],null,null,null,null,null)),(n()(),e.pb(14,0,null,null,1,"h4",[],null,null,null,null,null)),(n()(),e.Db(-1,null,["Attendance"])),(n()(),e.pb(16,0,null,0,2,"ion-avatar",[],null,null,null,g.J,g.b)),e.ob(17,49152,null,0,a.f,[e.h,e.k],null,null),(n()(),e.pb(18,0,null,0,0,"img",[["src","assets/img/start.jpg"]],null,[[null,"click"]],function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.triggerStart()&&e),e},null,null)),(n()(),e.pb(19,0,null,0,9,"div",[["padding",""]],null,null,null,null,null)),(n()(),e.pb(20,0,null,null,8,"ion-item",[],null,null,null,g.Z,g.r)),e.ob(21,49152,null,0,a.G,[e.h,e.k],null,null),(n()(),e.pb(22,0,null,0,6,"ion-input",[["name","dayplan"],["placeholder","Day Plan"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],function(n,l,t){var o=!0,u=n.component;return"ionBlur"===l&&(o=!1!==e.yb(n,23)._handleBlurEvent()&&o),"ionChange"===l&&(o=!1!==e.yb(n,23)._handleInputEvent(t.target.value)&&o),"ngModelChange"===l&&(o=!1!==(u.dayplan=t)&&o),o},g.Y,g.q)),e.ob(23,16384,null,0,a.Mb,[e.k],null,null),e.Ab(1024,null,p.h,function(n){return[n]},[a.Mb]),e.ob(25,671744,null,0,p.m,[[2,p.a],[8,null],[8,null],[6,p.h]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),e.Ab(2048,null,p.i,null,[p.m]),e.ob(27,16384,null,0,p.j,[[4,p.i]],null,null),e.ob(28,49152,null,0,a.F,[e.h,e.k],{name:[0,"name"],placeholder:[1,"placeholder"]},null),(n()(),e.pb(29,0,null,0,3,"div",[["padding",""]],null,null,null,null,null)),(n()(),e.pb(30,0,null,null,2,"ion-button",[["expand","block"],["size","small"],["type","submit"]],null,[[null,"click"]],function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.markAttendance()&&e),e},g.K,g.c)),e.ob(31,49152,null,0,a.j,[e.h,e.k],{expand:[0,"expand"],size:[1,"size"],type:[2,"type"]},null),(n()(),e.Db(-1,0,["Save"]))],function(n,l){n(l,25,0,"dayplan",l.component.dayplan),n(l,28,0,"dayplan","Day Plan"),n(l,31,0,"block","small","submit")},function(n,l){n(l,2,0,e.yb(l,6).ngClassUntouched,e.yb(l,6).ngClassTouched,e.yb(l,6).ngClassPristine,e.yb(l,6).ngClassDirty,e.yb(l,6).ngClassValid,e.yb(l,6).ngClassInvalid,e.yb(l,6).ngClassPending),n(l,22,0,e.yb(l,27).ngClassUntouched,e.yb(l,27).ngClassTouched,e.yb(l,27).ngClassPristine,e.yb(l,27).ngClassDirty,e.yb(l,27).ngClassValid,e.yb(l,27).ngClassInvalid,e.yb(l,27).ngClassPending)})}function f(n){return e.Eb(0,[(n()(),e.pb(0,0,null,null,1,"app-markattendance",[],null,null,null,y,m)),e.ob(1,114688,null,0,c,[u.a,a.Nb,h.m,s.a,r.a],null,null)],function(n,l){n(l,1,0)},null)}var v=e.lb("app-markattendance",c,f,{},{},[]),N=t("Ip0R");t.d(l,"MarkattendancePageModuleNgFactory",function(){return w});var w=e.mb(b,[],function(n){return e.vb([e.wb(512,e.j,e.bb,[[8,[d.a,v]],[3,e.j],e.x]),e.wb(4608,N.l,N.k,[e.u,[2,N.r]]),e.wb(4608,p.r,p.r,[]),e.wb(4608,a.b,a.b,[e.z,e.g]),e.wb(4608,a.Fb,a.Fb,[a.b,e.j,e.q,N.c]),e.wb(4608,a.Ib,a.Ib,[a.b,e.j,e.q,N.c]),e.wb(1073742336,N.b,N.b,[]),e.wb(1073742336,p.p,p.p,[]),e.wb(1073742336,p.g,p.g,[]),e.wb(1073742336,a.Cb,a.Cb,[]),e.wb(1073742336,h.p,h.p,[[2,h.v],[2,h.m]]),e.wb(1073742336,b,b,[]),e.wb(1024,h.k,function(){return[[{path:"",component:c}]]},[])])})}}]);